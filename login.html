<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="login_signup_title">Login/Sign up to continue</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#56DFCF',
                        secondary: '#0ea5e9',
                        accent: '#10b981',
                        dark: '#1e293b',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: transparent;
        }
        body[lang="hi"], body[lang="mr"] {
            font-family: 'Noto Sans Devanagari', sans-serif;
        }
        .auth-modal {
            position: fixed;
            top: 0;
            right: 0;
            width: 420px;
            height: 100vh;
            background-color: white;
            box-shadow: -2px 0 20px rgba(0,0,0,0.25);
            z-index: 1000;
            transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
        }
        .auth-modal.show {
            right: 0;
        }
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            z-index: 999;
            opacity: 1;
            visibility: visible;
            transition: all 0.3s ease-in-out;
        }
        .auth-tab {
            cursor: pointer;
            padding: 16px 24px;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #6b7280;
        }
        .auth-tab.active {
            border-bottom-color: #56DFCF;
            color: #56DFCF;
            background-color: #f8fafc;
        }
        .auth-tab:hover:not(.active) {
            color: #374151;
            background-color: #f1f5f9;
        }
        .auth-form {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .auth-form.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .input-group {
            position: relative;
        }
        .input-group input:focus + .input-label,
        .input-group input:not(:placeholder-shown) + .input-label {
            transform: translateY(-24px) scale(0.85);
            color: #56DFCF;
        }
        .input-label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            padding: 0 4px;
            transition: all 0.3s ease;
            pointer-events: none;
            color: #6b7280;
        }
        @media (max-width: 640px) {
            .auth-modal {
                width: 100vw;
                right: 0;
            }
        }
    </style>
</head>
<body onload="initializePage()">
    <!-- Auth Overlay and Modal -->
    <div id="authOverlay" class="auth-overlay" onclick="hideLoginModal()"></div>
    <div id="authModal" class="auth-modal show">
        <div class="h-full flex flex-col">
            <!-- Header -->
            <div class="bg-gradient-to-r from-primary to-accent text-white p-6">
                <button onclick="hideLoginModal()" class="float-right text-white hover:text-gray-200 text-xl transition-colors">
                    <i class="fas fa-times"></i>
                </button>
                <!-- Logo and Title -->
                <div class="text-center pt-2">
                    <div class="flex items-center justify-center mb-3">
                        <i class="fas fa-clinic-medical text-white text-2xl mr-2"></i>
                        <span class="text-xl font-bold">MediCare</span>
                    </div>
                    <h2 class="text-sm opacity-90" data-i18n="login_signup_title">Login/Sign up to continue</h2>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex bg-white border-b border-gray-200">
                <div id="loginTab" class="auth-tab active flex-1 text-center" onclick="switchTab('login')" data-i18n="login">Login</div>
                <div id="signupTab" class="auth-tab flex-1 text-center" onclick="switchTab('signup')" data-i18n="signup">Sign Up</div>
            </div>

            <!-- Content -->
            <div class="flex-1 p-6 bg-white">
                <!-- Login Form -->
                <div id="loginForm" class="auth-form active">
                    <div class="mb-8">
                        <label class="block text-gray-700 text-sm font-medium mb-4" data-i18n="mobile_number">Enter your mobile number</label>
                        <div class="relative">
                            <div class="flex border-2 border-gray-200 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-primary focus-within:border-primary transition-all">
                                <span class="inline-flex items-center px-4 text-sm text-gray-700 bg-gray-50 border-r border-gray-200">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyMCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiBmaWxsPSIjRkY5OTMzIi8+CjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSI0LjY3IiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB5PSI5LjMzIiB3aWR0aD0iMjAiIGhlaWdodD0iNC42NyIgZmlsbD0iIzEzOEE0RSIvPgo8Y2lyY2xlIGN4PSIxMCIgY3k9IjciIHI9IjIiIGZpbGw9IiMwMDJCNzIiLz4KPC9zdmc+" alt="India" class="w-4 h-3 mr-2">
                                    +91
                                </span>
                                <input type="tel" id="loginMobile" class="flex-1 px-4 py-4 focus:outline-none text-gray-800 text-lg" placeholder="Your Mobile Number" maxlength="10">
                            </div>
                        </div>
                    </div>
                    <button onclick="sendOTP('login')" class="w-full bg-primary text-white py-4 rounded-lg hover:bg-accent transition duration-300 font-semibold text-lg shadow-lg" data-i18n="send_otp">Send OTP</button>
                </div>

                <!-- Signup Form -->
                <div id="signupForm" class="auth-form">
                    <div class="space-y-6">
                        <!-- Full Name -->
                        <div class="input-group">
                            <input type="text" id="signupName" class="w-full px-4 py-4 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all text-lg" placeholder=" " required>
                            <label class="input-label" data-i18n="full_name">Full Name</label>
                        </div>

                        <!-- Mobile Number -->
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" data-i18n="mobile_number">Enter your mobile number</label>
                            <div class="flex border-2 border-gray-200 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-primary focus-within:border-primary transition-all">
                                <span class="inline-flex items-center px-4 text-sm text-gray-700 bg-gray-50 border-r border-gray-200">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyMCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjE0IiBmaWxsPSIjRkY5OTMzIi8+CjxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSI0LjY3IiBmaWxsPSJ3aGl0ZSIvPgo8cmVjdCB5PSI5LjMzIiB3aWR0aD0iMjAiIGhlaWdodD0iNC42NyIgZmlsbD0iIzEzOEE0RSIvPgo8Y2lyY2xlIGN4PSIxMCIgY3k9IjciIHI9IjIiIGZpbGw9IiMwMDJCNzIiLz4KPC9zdmc+" alt="India" class="w-4 h-3 mr-2">
                                    +91
                                </span>
                                <input type="tel" id="signupMobile" class="flex-1 px-4 py-4 focus:outline-none text-gray-800 text-lg" placeholder="Your Mobile Number" maxlength="10">
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="input-group">
                            <input type="email" id="signupEmail" class="w-full px-4 py-4 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition-all text-lg" placeholder=" " required>
                            <label class="input-label" data-i18n="email_address">Email Address</label>
                        </div>
                    </div>

                    <button onclick="registerUser()" class="w-full bg-primary text-white py-4 rounded-lg hover:bg-accent transition duration-300 font-semibold text-lg shadow-lg mt-8" data-i18n="create_account">Create Account</button>
                </div>

                <!-- Terms -->
                <p class="text-xs text-gray-600 mt-6 leading-relaxed text-center" data-i18n="terms_text">By continuing, you agree with our <span class="text-primary cursor-pointer hover:underline">Privacy Policy</span> and <span class="text-primary cursor-pointer hover:underline">Terms and Conditions</span></p>
            </div>

            <!-- Footer Benefits -->
            <div class="p-6 bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200">
                <h3 class="text-sm font-semibold text-gray-700 mb-4 text-center">Why Choose MediCare?</h3>
                <div class="grid grid-cols-2 gap-4 text-xs">
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-shipping-fast text-primary mr-2"></i>
                        <span>Free delivery on ₹399+</span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-shield-alt text-primary mr-2"></i>
                        <span>100% Genuine medicines</span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-clock text-primary mr-2"></i>
                        <span>24/7 Customer support</span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-percent text-primary mr-2"></i>
                        <span>Best prices guaranteed</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Translation dictionary
        const translations = {
            en: {
                login_signup_title: "Login/Sign up to continue",
                login: "Login",
                signup: "Sign Up",
                mobile_number: "Enter your mobile number",
                full_name: "Full Name",
                email_address: "Email Address",
                send_otp: "Send OTP",
                create_account: "Create Account",
                terms_text: "By continuing, you agree with our Privacy Policy and Terms and Conditions"
            },
            hi: {
                login_signup_title: "जारी रखने के लिए लॉगिन/साइन अप करें",
                login: "लॉगिन",
                signup: "साइन अप",
                mobile_number: "अपना मोबाइल नंबर दर्ज करें",
                full_name: "पूरा नाम",
                email_address: "ईमेल पता",
                send_otp: "OTP भेजें",
                create_account: "खाता बनाएं",
                terms_text: "जारी रखकर, आप हमारी गोपनीयता नीति और नियम और शर्तों से सहमत होते हैं"
            },
            mr: {
                login_signup_title: "सुरू ठेवण्यासाठी लॉगिन/साइन अप करा",
                login: "लॉगिन",
                signup: "साइन अप",
                mobile_number: "तुमचा मोबाइल नंबर टाका",
                full_name: "पूर्ण नाव",
                email_address: "ईमेल पत्ता",
                send_otp: "OTP पाठवा",
                create_account: "खाते तयार करा",
                terms_text: "सुरू ठेवून, तुम्ही आमच्या गोपनीयता धोरण आणि अटी व शर्तींशी सहमत आहात"
            }
        };

        // Initialize page: Apply language and show modal
        function initializePage() {
            const savedLanguage = localStorage.getItem('language') || 'en';
            document.documentElement.lang = savedLanguage;
            applyLanguage(savedLanguage);
            showLoginModal(); // Show modal on page load
        }

        // Apply language to all elements with data-i18n
        function applyLanguage(lang) {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            // Update document title
            const titleElement = document.querySelector('title');
            const titleKey = titleElement.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][titleKey]) {
                titleElement.textContent = translations[lang][titleKey];
            }
        }

        // Show auth modal
        function showLoginModal() {
            document.getElementById('authOverlay').classList.add('show');
            document.getElementById('authModal').style.display = 'block';
            setTimeout(() => {
                document.getElementById('authModal').classList.add('show');
            }, 10);
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        // Hide auth modal
        function hideLoginModal() {
            document.getElementById('authModal').classList.remove('show');
            document.getElementById('authOverlay').classList.remove('show');
            document.body.style.overflow = 'auto'; // Restore scrolling
            setTimeout(() => {
                document.getElementById('authModal').style.display = 'none';
                // Redirect back to previous page or home
                window.history.back();
            }, 400);
        }

        // Switch between Login/Signup tabs
        function switchTab(tab) {
            const loginTab = document.getElementById('loginTab');
            const signupTab = document.getElementById('signupTab');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');

            if (tab === 'login') {
                loginTab.classList.add('active');
                signupTab.classList.remove('active');
                loginForm.classList.add('active');
                signupForm.classList.remove('active');
            } else {
                signupTab.classList.add('active');
                loginTab.classList.remove('active');
                signupForm.classList.add('active');
                loginForm.classList.remove('active');
            }
        }

        // Send OTP function for login
        function sendOTP(type) {
            const mobileInput = document.getElementById('loginMobile');
            const mobile = mobileInput.value.trim();
            
            if (mobile.length === 10 && /^[6-9]\d{9}$/.test(mobile)) {
                // Simulate OTP sending
                showSuccessMessage(`OTP sent to +91 ${mobile}`);
                // Here you would make API call to send OTP
                // Example: sendOTPToServer(mobile, type);
            } else {
                showErrorMessage('Please enter a valid 10-digit mobile number starting with 6, 7, 8, or 9');
            }
        }

        // Register user function for signup
        function registerUser() {
            const name = document.getElementById('signupName').value.trim();
            const mobile = document.getElementById('signupMobile').value.trim();
            const email = document.getElementById('signupEmail').value.trim();

            // Validation
            if (!name) {
                showErrorMessage('Please enter your full name');
                return;
            }

            if (mobile.length !== 10 || !/^[6-9]\d{9}$/.test(mobile)) {
                showErrorMessage('Please enter a valid 10-digit mobile number starting with 6, 7, 8, or 9');
                return;
            }

            if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showErrorMessage('Please enter a valid email address');
                return;
            }

            // Simulate user registration
            const userData = {
                name: name,
                mobile: mobile,
                email: email,
                registrationDate: new Date().toISOString()
            };

            // Store user data (in real app, this would be sent to server)
            console.log('User registration data:', userData);
            showSuccessMessage(`Account created successfully! OTP sent to +91 ${mobile}`);
            
            // Here you would make API call to register user
            // Example: registerUserOnServer(userData);
        }

        // Utility functions for messages
        function showSuccessMessage(message) {
            const existingMessage = document.querySelector('.message-popup');
            if (existingMessage) existingMessage.remove();

            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-popup fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all';
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        function showErrorMessage(message) {
            const existingMessage = document.querySelector('.message-popup');
            if (existingMessage) existingMessage.remove();

            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-popup fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transition-all';
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Handle Enter key press
        document.addEventListener('DOMContentLoaded', function() {
            // Login mobile input
            document.getElementById('loginMobile').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendOTP('login');
                }
            });

            // Signup form inputs
            document.getElementById('signupName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('signupMobile').focus();
                }
            });

            document.getElementById('signupMobile').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('signupEmail').focus();
                }
            });

            document.getElementById('signupEmail').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    registerUser();
                }
            });

            // Auto-format mobile number input
            ['loginMobile', 'signupMobile'].forEach(id => {
                document.getElementById(id).addEventListener('input', function(e) {
                    this.value = this.value.replace(/\D/g, '');
                });
            });
        });

        // ESC key to close modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                hideLoginModal();
            }
        });
    </script>
</body>
</html>